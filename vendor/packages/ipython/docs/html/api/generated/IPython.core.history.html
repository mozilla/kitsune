

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>core.history &mdash; IPython 0.11 documentation</title>
    
    <link rel="stylesheet" href="../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '0.11',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="top" title="IPython 0.11 documentation" href="../../index.html" />
    <link rel="up" title="The IPython API" href="../index.html" />
    <link rel="next" title="core.hooks" href="IPython.core.hooks.html" />
    <link rel="prev" title="core.formatters" href="IPython.core.formatters.html" /> 
  </head>
  <body>

<div style="background-color: white; text-align: left; padding: 10px 10px 15px 15px">
<a href="../../index.html"><img src="../../_static/logo.png" border="0" alt="IPython Documentation"/></a>
</div>

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="IPython.core.hooks.html" title="core.hooks"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="IPython.core.formatters.html" title="core.formatters"
             accesskey="P">previous</a> |</li>
        <li><a href="../../index.html">home</a>|&nbsp;</li>
        <li><a href="../../search.html">search</a>|&nbsp;</li>
       <li><a href="../../index.html">documentation </a> &raquo;</li>

          <li><a href="../index.html" accesskey="U">The IPython API</a> &raquo;</li> 
      </ul>
    </div>

      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">core.history</a><ul>
<li><a class="reference internal" href="#module-core-history">Module: <tt class="docutils literal"><span class="pre">core.history</span></tt></a></li>
<li><a class="reference internal" href="#classes">Classes</a><ul>
<li><a class="reference internal" href="#historymanager"><tt class="docutils literal"><span class="pre">HistoryManager</span></tt></a></li>
<li><a class="reference internal" href="#historysavingthread"><tt class="docutils literal"><span class="pre">HistorySavingThread</span></tt></a></li>
</ul>
</li>
<li><a class="reference internal" href="#functions">Functions</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="IPython.core.formatters.html"
                        title="previous chapter">core.formatters</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="IPython.core.hooks.html"
                        title="next chapter">core.hooks</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../../_sources/api/generated/IPython.core.history.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="core-history">
<h1>core.history<a class="headerlink" href="#core-history" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-core-history">
<h2>Module: <tt class="xref py py-mod docutils literal"><span class="pre">core.history</span></tt><a class="headerlink" href="#module-core-history" title="Permalink to this headline">¶</a></h2>
<p>Inheritance diagram for <tt class="docutils literal"><span class="pre">IPython.core.history</span></tt>:</p>
<img src="../../_images/inheritance2fbfe3650b.png" usemap="#inheritance2fbfe3650b" class="inheritance"/><map id="inheritance2fbfe3650b" name="inheritance2fbfe3650b">
</map>
<span class="target" id="module-IPython.core.history"></span><p>History related magics and functionality</p>
</div>
<div class="section" id="classes">
<h2>Classes<a class="headerlink" href="#classes" title="Permalink to this headline">¶</a></h2>
<div class="section" id="historymanager">
<h3><a class="reference internal" href="#IPython.core.history.HistoryManager" title="IPython.core.history.HistoryManager"><tt class="xref py py-class docutils literal"><span class="pre">HistoryManager</span></tt></a><a class="headerlink" href="#historymanager" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="IPython.core.history.HistoryManager">
<em class="property">class </em><tt class="descclassname">IPython.core.history.</tt><tt class="descname">HistoryManager</tt><big>(</big><em>shell</em>, <em>config=None</em>, <em>**traits</em><big>)</big><a class="headerlink" href="#IPython.core.history.HistoryManager" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="IPython.config.configurable.html#IPython.config.configurable.Configurable" title="IPython.config.configurable.Configurable"><tt class="xref py py-class docutils literal"><span class="pre">IPython.config.configurable.Configurable</span></tt></a></p>
<p>A class to organize all history-related functionality in one place.</p>
<dl class="method">
<dt id="IPython.core.history.HistoryManager.__init__">
<tt class="descname">__init__</tt><big>(</big><em>shell</em>, <em>config=None</em>, <em>**traits</em><big>)</big><a class="headerlink" href="#IPython.core.history.HistoryManager.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new history manager associated with a shell instance.</p>
</dd></dl>

<dl class="classmethod">
<dt id="IPython.core.history.HistoryManager.class_config_section">
<em class="property">classmethod </em><tt class="descname">class_config_section</tt><big>(</big><big>)</big><a class="headerlink" href="#IPython.core.history.HistoryManager.class_config_section" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the config class config section</p>
</dd></dl>

<dl class="classmethod">
<dt id="IPython.core.history.HistoryManager.class_get_help">
<em class="property">classmethod </em><tt class="descname">class_get_help</tt><big>(</big><big>)</big><a class="headerlink" href="#IPython.core.history.HistoryManager.class_get_help" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the help string for this class in ReST format.</p>
</dd></dl>

<dl class="classmethod">
<dt id="IPython.core.history.HistoryManager.class_get_trait_help">
<em class="property">classmethod </em><tt class="descname">class_get_trait_help</tt><big>(</big><em>trait</em><big>)</big><a class="headerlink" href="#IPython.core.history.HistoryManager.class_get_trait_help" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the help string for a single trait.</p>
</dd></dl>

<dl class="classmethod">
<dt id="IPython.core.history.HistoryManager.class_print_help">
<em class="property">classmethod </em><tt class="descname">class_print_help</tt><big>(</big><big>)</big><a class="headerlink" href="#IPython.core.history.HistoryManager.class_print_help" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the help string for a single trait and print it.</p>
</dd></dl>

<dl class="classmethod">
<dt id="IPython.core.history.HistoryManager.class_trait_names">
<em class="property">classmethod </em><tt class="descname">class_trait_names</tt><big>(</big><em>**metadata</em><big>)</big><a class="headerlink" href="#IPython.core.history.HistoryManager.class_trait_names" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a list of all the names of this classes traits.</p>
<p>This method is just like the <a class="reference internal" href="#IPython.core.history.HistoryManager.trait_names" title="IPython.core.history.HistoryManager.trait_names"><tt class="xref py py-meth docutils literal"><span class="pre">trait_names()</span></tt></a> method, but is unbound.</p>
</dd></dl>

<dl class="classmethod">
<dt id="IPython.core.history.HistoryManager.class_traits">
<em class="property">classmethod </em><tt class="descname">class_traits</tt><big>(</big><em>**metadata</em><big>)</big><a class="headerlink" href="#IPython.core.history.HistoryManager.class_traits" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a list of all the traits of this class.</p>
<p>This method is just like the <a class="reference internal" href="#IPython.core.history.HistoryManager.traits" title="IPython.core.history.HistoryManager.traits"><tt class="xref py py-meth docutils literal"><span class="pre">traits()</span></tt></a> method, but is unbound.</p>
<p>The TraitTypes returned don&#8217;t know anything about the values
that the various HasTrait&#8217;s instances are holding.</p>
<p>This follows the same algorithm as traits does and does not allow
for any simple way of specifying merely that a metadata name
exists, but has any value.  This is because get_metadata returns
None if a metadata key doesn&#8217;t exist.</p>
</dd></dl>

<dl class="attribute">
<dt id="IPython.core.history.HistoryManager.config">
<tt class="descname">config</tt><a class="headerlink" href="#IPython.core.history.HistoryManager.config" title="Permalink to this definition">¶</a></dt>
<dd><p>A trait whose value must be an instance of a specified class.</p>
<p>The value can also be an instance of a subclass of the specified class.</p>
</dd></dl>

<dl class="attribute">
<dt id="IPython.core.history.HistoryManager.created">
<tt class="descname">created</tt><em class="property"> = None</em><a class="headerlink" href="#IPython.core.history.HistoryManager.created" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="IPython.core.history.HistoryManager.db">
<tt class="descname">db</tt><a class="headerlink" href="#IPython.core.history.HistoryManager.db" title="Permalink to this definition">¶</a></dt>
<dd><p>A trait whose value must be an instance of a specified class.</p>
<p>The value can also be an instance of a subclass of the specified class.</p>
</dd></dl>

<dl class="attribute">
<dt id="IPython.core.history.HistoryManager.db_cache_size">
<tt class="descname">db_cache_size</tt><a class="headerlink" href="#IPython.core.history.HistoryManager.db_cache_size" title="Permalink to this definition">¶</a></dt>
<dd><p>A integer trait.</p>
</dd></dl>

<dl class="attribute">
<dt id="IPython.core.history.HistoryManager.db_input_cache">
<tt class="descname">db_input_cache</tt><a class="headerlink" href="#IPython.core.history.HistoryManager.db_input_cache" title="Permalink to this definition">¶</a></dt>
<dd><p>An instance of a Python list.</p>
</dd></dl>

<dl class="attribute">
<dt id="IPython.core.history.HistoryManager.db_log_output">
<tt class="descname">db_log_output</tt><a class="headerlink" href="#IPython.core.history.HistoryManager.db_log_output" title="Permalink to this definition">¶</a></dt>
<dd><p>A boolean (True, False) trait.</p>
</dd></dl>

<dl class="attribute">
<dt id="IPython.core.history.HistoryManager.db_output_cache">
<tt class="descname">db_output_cache</tt><a class="headerlink" href="#IPython.core.history.HistoryManager.db_output_cache" title="Permalink to this definition">¶</a></dt>
<dd><p>An instance of a Python list.</p>
</dd></dl>

<dl class="attribute">
<dt id="IPython.core.history.HistoryManager.dir_hist">
<tt class="descname">dir_hist</tt><a class="headerlink" href="#IPython.core.history.HistoryManager.dir_hist" title="Permalink to this definition">¶</a></dt>
<dd><p>An instance of a Python list.</p>
</dd></dl>

<dl class="method">
<dt id="IPython.core.history.HistoryManager.end_session">
<tt class="descname">end_session</tt><big>(</big><big>)</big><a class="headerlink" href="#IPython.core.history.HistoryManager.end_session" title="Permalink to this definition">¶</a></dt>
<dd><p>Close the database session, filling in the end time and line count.</p>
</dd></dl>

<dl class="method">
<dt id="IPython.core.history.HistoryManager.get_range">
<tt class="descname">get_range</tt><big>(</big><em>session=0</em>, <em>start=1</em>, <em>stop=None</em>, <em>raw=True</em>, <em>output=False</em><big>)</big><a class="headerlink" href="#IPython.core.history.HistoryManager.get_range" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve input by session.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters :</th><td class="field-body"><p class="first"><strong>session</strong> : int</p>
<blockquote>
<div><p>Session number to retrieve. The current session is 0, and negative
numbers count back from current session, so -1 is previous session.</p>
</div></blockquote>
<p><strong>start</strong> : int</p>
<blockquote>
<div><p>First line to retrieve.</p>
</div></blockquote>
<p><strong>stop</strong> : int</p>
<blockquote>
<div><p>End of line range (excluded from output itself). If None, retrieve
to the end of the session.</p>
</div></blockquote>
<p><strong>raw</strong> : bool</p>
<blockquote>
<div><p>If True, return untranslated input</p>
</div></blockquote>
<p><strong>output</strong> : bool</p>
<blockquote>
<div><p>If True, attempt to include output. This will be &#8216;real&#8217; Python
objects for the current session, or text reprs from previous
sessions if db_log_output was enabled at the time. Where no output
is found, None is used.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns :</th><td class="field-body"><p class="first"><strong>An iterator over the desired lines. Each line is a 3-tuple, either</strong> :</p>
<p><strong>(session, line, input) if output is False, or</strong> :</p>
<p class="last"><strong>(session, line, (input, output)) if output is True.</strong> :</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="IPython.core.history.HistoryManager.get_range_by_str">
<tt class="descname">get_range_by_str</tt><big>(</big><em>rangestr</em>, <em>raw=True</em>, <em>output=False</em><big>)</big><a class="headerlink" href="#IPython.core.history.HistoryManager.get_range_by_str" title="Permalink to this definition">¶</a></dt>
<dd><p>Get lines of history from a string of ranges, as used by magic
commands %hist, %save, %macro, etc.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters :</th><td class="field-body"><p class="first"><strong>rangestr</strong> : str</p>
<blockquote>
<div><p>A string specifying ranges, e.g. &#8220;5 ~2/1-4&#8221;. See
<a class="reference internal" href="#IPython.core.history.magic_history" title="IPython.core.history.magic_history"><tt class="xref py py-func docutils literal"><span class="pre">magic_history()</span></tt></a> for full details.</p>
</div></blockquote>
<p><strong>raw, output</strong> : bool</p>
<blockquote>
<div><p>As <a class="reference internal" href="#IPython.core.history.HistoryManager.get_range" title="IPython.core.history.HistoryManager.get_range"><tt class="xref py py-meth docutils literal"><span class="pre">get_range()</span></tt></a></p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns :</th><td class="field-body"><p class="first last"><strong>Tuples as :meth:`get_range`</strong> :</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="IPython.core.history.HistoryManager.get_tail">
<tt class="descname">get_tail</tt><big>(</big><em>n=10</em>, <em>raw=True</em>, <em>output=False</em>, <em>include_latest=False</em><big>)</big><a class="headerlink" href="#IPython.core.history.HistoryManager.get_tail" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the last n lines from the history database.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters :</th><td class="field-body"><p class="first"><strong>n</strong> : int</p>
<blockquote>
<div><p>The number of lines to get</p>
</div></blockquote>
<p><strong>raw, output</strong> : bool</p>
<blockquote>
<div><p>See <a class="reference internal" href="#IPython.core.history.HistoryManager.get_range" title="IPython.core.history.HistoryManager.get_range"><tt class="xref py py-meth docutils literal"><span class="pre">get_range()</span></tt></a></p>
</div></blockquote>
<p><strong>include_latest</strong> : bool</p>
<blockquote>
<div><p>If False (default), n+1 lines are fetched, and the latest one
is discarded. This is intended to be used where the function
is called by a user command, which it should not return.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns :</th><td class="field-body"><p class="first last"><strong>Tuples as :meth:`get_range`</strong> :</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="IPython.core.history.HistoryManager.hist_file">
<tt class="descname">hist_file</tt><a class="headerlink" href="#IPython.core.history.HistoryManager.hist_file" title="Permalink to this definition">¶</a></dt>
<dd><p>A trait for unicode strings.</p>
</dd></dl>

<dl class="method">
<dt id="IPython.core.history.HistoryManager.init_db">
<tt class="descname">init_db</tt><big>(</big><big>)</big><a class="headerlink" href="#IPython.core.history.HistoryManager.init_db" title="Permalink to this definition">¶</a></dt>
<dd><p>Connect to the database, and create tables if necessary.</p>
</dd></dl>

<dl class="attribute">
<dt id="IPython.core.history.HistoryManager.input_hist_parsed">
<tt class="descname">input_hist_parsed</tt><a class="headerlink" href="#IPython.core.history.HistoryManager.input_hist_parsed" title="Permalink to this definition">¶</a></dt>
<dd><p>An instance of a Python list.</p>
</dd></dl>

<dl class="attribute">
<dt id="IPython.core.history.HistoryManager.input_hist_raw">
<tt class="descname">input_hist_raw</tt><a class="headerlink" href="#IPython.core.history.HistoryManager.input_hist_raw" title="Permalink to this definition">¶</a></dt>
<dd><p>An instance of a Python list.</p>
</dd></dl>

<dl class="method">
<dt id="IPython.core.history.HistoryManager.name_session">
<tt class="descname">name_session</tt><big>(</big><em>name</em><big>)</big><a class="headerlink" href="#IPython.core.history.HistoryManager.name_session" title="Permalink to this definition">¶</a></dt>
<dd><p>Give the current session a name in the history database.</p>
</dd></dl>

<dl class="method">
<dt id="IPython.core.history.HistoryManager.new_session">
<tt class="descname">new_session</tt><big>(</big><em>conn=None</em><big>)</big><a class="headerlink" href="#IPython.core.history.HistoryManager.new_session" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a new session number.</p>
</dd></dl>

<dl class="method">
<dt id="IPython.core.history.HistoryManager.on_trait_change">
<tt class="descname">on_trait_change</tt><big>(</big><em>handler</em>, <em>name=None</em>, <em>remove=False</em><big>)</big><a class="headerlink" href="#IPython.core.history.HistoryManager.on_trait_change" title="Permalink to this definition">¶</a></dt>
<dd><p>Setup a handler to be called when a trait changes.</p>
<p>This is used to setup dynamic notifications of trait changes.</p>
<p>Static handlers can be created by creating methods on a HasTraits
subclass with the naming convention &#8216;_[traitname]_changed&#8217;.  Thus,
to create static handler for the trait &#8216;a&#8217;, create the method
_a_changed(self, name, old, new) (fewer arguments can be used, see
below).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters :</th><td class="field-body"><p class="first"><strong>handler</strong> : callable</p>
<blockquote>
<div><p>A callable that is called when a trait changes.  Its 
signature can be handler(), handler(name), handler(name, new)
or handler(name, old, new).</p>
</div></blockquote>
<p><strong>name</strong> : list, str, None</p>
<blockquote>
<div><p>If None, the handler will apply to all traits.  If a list
of str, handler will apply to all names in the list.  If a
str, the handler will apply just to that name.</p>
</div></blockquote>
<p><strong>remove</strong> : bool</p>
<blockquote class="last">
<div><p>If False (the default), then install the handler.  If True
then unintall it.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="IPython.core.history.HistoryManager.output_hist">
<tt class="descname">output_hist</tt><a class="headerlink" href="#IPython.core.history.HistoryManager.output_hist" title="Permalink to this definition">¶</a></dt>
<dd><p>An instance of a Python dict.</p>
</dd></dl>

<dl class="attribute">
<dt id="IPython.core.history.HistoryManager.output_hist_reprs">
<tt class="descname">output_hist_reprs</tt><a class="headerlink" href="#IPython.core.history.HistoryManager.output_hist_reprs" title="Permalink to this definition">¶</a></dt>
<dd><p>An instance of a Python dict.</p>
</dd></dl>

<dl class="method">
<dt id="IPython.core.history.HistoryManager.reset">
<tt class="descname">reset</tt><big>(</big><em>new_session=True</em><big>)</big><a class="headerlink" href="#IPython.core.history.HistoryManager.reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Clear the session history, releasing all object references, and
optionally open a new session.</p>
</dd></dl>

<dl class="attribute">
<dt id="IPython.core.history.HistoryManager.save_flag">
<tt class="descname">save_flag</tt><a class="headerlink" href="#IPython.core.history.HistoryManager.save_flag" title="Permalink to this definition">¶</a></dt>
<dd><p>A trait whose value must be an instance of a specified class.</p>
<p>The value can also be an instance of a subclass of the specified class.</p>
</dd></dl>

<dl class="attribute">
<dt id="IPython.core.history.HistoryManager.save_thread">
<tt class="descname">save_thread</tt><a class="headerlink" href="#IPython.core.history.HistoryManager.save_thread" title="Permalink to this definition">¶</a></dt>
<dd><p>A trait whose value must be an instance of a specified class.</p>
<p>The value can also be an instance of a subclass of the specified class.</p>
</dd></dl>

<dl class="method">
<dt id="IPython.core.history.HistoryManager.search">
<tt class="descname">search</tt><big>(</big><em>pattern='*'</em>, <em>raw=True</em>, <em>search_raw=True</em>, <em>output=False</em><big>)</big><a class="headerlink" href="#IPython.core.history.HistoryManager.search" title="Permalink to this definition">¶</a></dt>
<dd><p>Search the database using unix glob-style matching (wildcards
* and ?).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters :</th><td class="field-body"><p class="first"><strong>pattern</strong> : str</p>
<blockquote>
<div><p>The wildcarded pattern to match when searching</p>
</div></blockquote>
<p><strong>search_raw</strong> : bool</p>
<blockquote>
<div><p>If True, search the raw input, otherwise, the parsed input</p>
</div></blockquote>
<p><strong>raw, output</strong> : bool</p>
<blockquote>
<div><p>See <a class="reference internal" href="#IPython.core.history.HistoryManager.get_range" title="IPython.core.history.HistoryManager.get_range"><tt class="xref py py-meth docutils literal"><span class="pre">get_range()</span></tt></a></p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns :</th><td class="field-body"><p class="first last"><strong>Tuples as :meth:`get_range`</strong> :</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="IPython.core.history.HistoryManager.session_number">
<tt class="descname">session_number</tt><a class="headerlink" href="#IPython.core.history.HistoryManager.session_number" title="Permalink to this definition">¶</a></dt>
<dd><p>A integer trait.</p>
</dd></dl>

<dl class="attribute">
<dt id="IPython.core.history.HistoryManager.shell">
<tt class="descname">shell</tt><a class="headerlink" href="#IPython.core.history.HistoryManager.shell" title="Permalink to this definition">¶</a></dt>
<dd><p>A trait whose value must be an instance of a specified class.</p>
<p>The value can also be an instance of a subclass of the specified class.</p>
</dd></dl>

<dl class="method">
<dt id="IPython.core.history.HistoryManager.store_inputs">
<tt class="descname">store_inputs</tt><big>(</big><em>line_num</em>, <em>source</em>, <em>source_raw=None</em><big>)</big><a class="headerlink" href="#IPython.core.history.HistoryManager.store_inputs" title="Permalink to this definition">¶</a></dt>
<dd><p>Store source and raw input in history and create input cache
variables _i*.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters :</th><td class="field-body"><p class="first"><strong>line_num</strong> : int</p>
<blockquote>
<div><p>The prompt number of this input.</p>
</div></blockquote>
<p><strong>source</strong> : str</p>
<blockquote>
<div><p>Python input.</p>
</div></blockquote>
<p><strong>source_raw</strong> : str, optional</p>
<blockquote class="last">
<div><p>If given, this is the raw input without any IPython transformations
applied to it.  If not given, <tt class="docutils literal"><span class="pre">source</span></tt> is used.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="IPython.core.history.HistoryManager.store_output">
<tt class="descname">store_output</tt><big>(</big><em>line_num</em><big>)</big><a class="headerlink" href="#IPython.core.history.HistoryManager.store_output" title="Permalink to this definition">¶</a></dt>
<dd><p>If database output logging is enabled, this saves all the
outputs from the indicated prompt number to the database. It&#8217;s
called by run_cell after code has been executed.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters :</th><td class="field-body"><p class="first"><strong>line_num</strong> : int</p>
<blockquote class="last">
<div><p>The line number from which to save outputs</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="IPython.core.history.HistoryManager.trait_metadata">
<tt class="descname">trait_metadata</tt><big>(</big><em>traitname</em>, <em>key</em><big>)</big><a class="headerlink" href="#IPython.core.history.HistoryManager.trait_metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>Get metadata values for trait by key.</p>
</dd></dl>

<dl class="method">
<dt id="IPython.core.history.HistoryManager.trait_names">
<tt class="descname">trait_names</tt><big>(</big><em>**metadata</em><big>)</big><a class="headerlink" href="#IPython.core.history.HistoryManager.trait_names" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a list of all the names of this classes traits.</p>
</dd></dl>

<dl class="method">
<dt id="IPython.core.history.HistoryManager.traits">
<tt class="descname">traits</tt><big>(</big><em>**metadata</em><big>)</big><a class="headerlink" href="#IPython.core.history.HistoryManager.traits" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a list of all the traits of this class.</p>
<p>The TraitTypes returned don&#8217;t know anything about the values
that the various HasTrait&#8217;s instances are holding.</p>
<p>This follows the same algorithm as traits does and does not allow
for any simple way of specifying merely that a metadata name
exists, but has any value.  This is because get_metadata returns
None if a metadata key doesn&#8217;t exist.</p>
</dd></dl>

<dl class="method">
<dt id="IPython.core.history.HistoryManager.writeout_cache">
<tt class="descname">writeout_cache</tt><big>(</big><em>conn=None</em><big>)</big><a class="headerlink" href="#IPython.core.history.HistoryManager.writeout_cache" title="Permalink to this definition">¶</a></dt>
<dd><p>Write any entries in the cache to the database.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="historysavingthread">
<h3><a class="reference internal" href="#IPython.core.history.HistorySavingThread" title="IPython.core.history.HistorySavingThread"><tt class="xref py py-class docutils literal"><span class="pre">HistorySavingThread</span></tt></a><a class="headerlink" href="#historysavingthread" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="IPython.core.history.HistorySavingThread">
<em class="property">class </em><tt class="descclassname">IPython.core.history.</tt><tt class="descname">HistorySavingThread</tt><big>(</big><em>history_manager</em><big>)</big><a class="headerlink" href="#IPython.core.history.HistorySavingThread" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">threading.Thread</span></tt></p>
<p>This thread takes care of writing history to the database, so that
the UI isn&#8217;t held up while that happens.</p>
<p>It waits for the HistoryManager&#8217;s save_flag to be set, then writes out
the history cache. The main thread is responsible for setting the flag when
the cache size reaches a defined threshold.</p>
<dl class="method">
<dt id="IPython.core.history.HistorySavingThread.__init__">
<tt class="descname">__init__</tt><big>(</big><em>history_manager</em><big>)</big><a class="headerlink" href="#IPython.core.history.HistorySavingThread.__init__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="IPython.core.history.HistorySavingThread.daemon">
<tt class="descname">daemon</tt><em class="property"> = True</em><a class="headerlink" href="#IPython.core.history.HistorySavingThread.daemon" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="IPython.core.history.HistorySavingThread.getName">
<tt class="descname">getName</tt><big>(</big><big>)</big><a class="headerlink" href="#IPython.core.history.HistorySavingThread.getName" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="IPython.core.history.HistorySavingThread.ident">
<tt class="descname">ident</tt><a class="headerlink" href="#IPython.core.history.HistorySavingThread.ident" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="IPython.core.history.HistorySavingThread.isAlive">
<tt class="descname">isAlive</tt><big>(</big><big>)</big><a class="headerlink" href="#IPython.core.history.HistorySavingThread.isAlive" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="IPython.core.history.HistorySavingThread.isDaemon">
<tt class="descname">isDaemon</tt><big>(</big><big>)</big><a class="headerlink" href="#IPython.core.history.HistorySavingThread.isDaemon" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="IPython.core.history.HistorySavingThread.is_alive">
<tt class="descname">is_alive</tt><big>(</big><big>)</big><a class="headerlink" href="#IPython.core.history.HistorySavingThread.is_alive" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="IPython.core.history.HistorySavingThread.join">
<tt class="descname">join</tt><big>(</big><em>timeout=None</em><big>)</big><a class="headerlink" href="#IPython.core.history.HistorySavingThread.join" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="IPython.core.history.HistorySavingThread.name">
<tt class="descname">name</tt><a class="headerlink" href="#IPython.core.history.HistorySavingThread.name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="IPython.core.history.HistorySavingThread.run">
<tt class="descname">run</tt><big>(</big><big>)</big><a class="headerlink" href="#IPython.core.history.HistorySavingThread.run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="IPython.core.history.HistorySavingThread.setDaemon">
<tt class="descname">setDaemon</tt><big>(</big><em>daemonic</em><big>)</big><a class="headerlink" href="#IPython.core.history.HistorySavingThread.setDaemon" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="IPython.core.history.HistorySavingThread.setName">
<tt class="descname">setName</tt><big>(</big><em>name</em><big>)</big><a class="headerlink" href="#IPython.core.history.HistorySavingThread.setName" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="IPython.core.history.HistorySavingThread.start">
<tt class="descname">start</tt><big>(</big><big>)</big><a class="headerlink" href="#IPython.core.history.HistorySavingThread.start" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="IPython.core.history.HistorySavingThread.stop">
<tt class="descname">stop</tt><big>(</big><big>)</big><a class="headerlink" href="#IPython.core.history.HistorySavingThread.stop" title="Permalink to this definition">¶</a></dt>
<dd><p>This can be called from the main thread to safely stop this thread.</p>
<p>Note that it does not attempt to write out remaining history before
exiting. That should be done by calling the HistoryManager&#8217;s
end_session method.</p>
</dd></dl>

<dl class="attribute">
<dt id="IPython.core.history.HistorySavingThread.stop_now">
<tt class="descname">stop_now</tt><em class="property"> = False</em><a class="headerlink" href="#IPython.core.history.HistorySavingThread.stop_now" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="functions">
<h2>Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="IPython.core.history.extract_hist_ranges">
<tt class="descclassname">IPython.core.history.</tt><tt class="descname">extract_hist_ranges</tt><big>(</big><em>ranges_str</em><big>)</big><a class="headerlink" href="#IPython.core.history.extract_hist_ranges" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn a string of history ranges into 3-tuples of (session, start, stop).</p>
<p class="rubric">Examples</p>
<p>list(extract_input_ranges(&#8220;~8/5-~7/4 2&#8221;))
[(-8, 5, None), (-7, 1, 4), (0, 2, 3)]</p>
</dd></dl>

<dl class="function">
<dt id="IPython.core.history.init_ipython">
<tt class="descclassname">IPython.core.history.</tt><tt class="descname">init_ipython</tt><big>(</big><em>ip</em><big>)</big><a class="headerlink" href="#IPython.core.history.init_ipython" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="IPython.core.history.magic_history">
<tt class="descclassname">IPython.core.history.</tt><tt class="descname">magic_history</tt><big>(</big><em>self</em>, <em>parameter_s=''</em><big>)</big><a class="headerlink" href="#IPython.core.history.magic_history" title="Permalink to this definition">¶</a></dt>
<dd><p>Print input history (_i&lt;n&gt; variables), with most recent last.</p>
<p>%history       -&gt; print at most 40 inputs (some may be multi-line)%history n     -&gt; print at most n inputs%history n1 n2 -&gt; print inputs between n1 and n2 (n2 not included)</p>
<p>By default, input history is printed without line numbers so it can be
directly pasted into an editor. Use -n to show them.</p>
<p>Ranges of history can be indicated using the syntax:
4      : Line 4, current session
4-6    : Lines 4-6, current session
243/1-5: Lines 1-5, session 243
~2/7   : Line 7, session 2 before current
~8/1-~6/5 : From the first line of 8 sessions ago, to the fifth line</p>
<blockquote>
<div>of 6 sessions ago.</div></blockquote>
<p>Multiple ranges can be entered, separated by spaces</p>
<p>The same syntax is used by %macro, %save, %edit, %rerun</p>
<p>Options:</p>
<blockquote>
<div><p>-n: print line numbers for each input.
This feature is only available if numbered prompts are in use.</p>
<p>-o: also print outputs for each input.</p>
<dl class="docutils">
<dt>-p: print classic &#8216;&gt;&gt;&gt;&#8217; python prompts before each input.  This is useful</dt>
<dd>for making documentation, and in conjunction with -o, for producing
doctest-ready output.</dd>
</dl>
<p>-r: (default) print the &#8216;raw&#8217; history, i.e. the actual commands you typed.</p>
<p>-t: print the &#8216;translated&#8217; history, as IPython understands it.  IPython
filters your input and converts it all into valid Python source before
executing it (things like magics or aliases are turned into function
calls, for example). With this option, you&#8217;ll see the native history
instead of the user-entered version: &#8216;%cd /&#8217; will be seen as
&#8216;get_ipython().magic(&#8220;%cd /&#8221;)&#8217; instead of &#8216;%cd /&#8217;.</p>
<p>-g: treat the arg as a pattern to grep for in (full) history.
This includes the saved history (almost all commands ever written).
Use &#8216;%hist -g&#8217; to show full saved history (may be very long).</p>
<p>-l: get the last n lines from all sessions. Specify n as a single arg, or
the default is the last 10 lines.</p>
<dl class="docutils">
<dt>-f FILENAME: instead of printing the output to the screen, redirect it to</dt>
<dd>the given file.  The file is always overwritten, though IPython asks for
confirmation first if it already exists.</dd>
</dl>
</div></blockquote>
<p class="rubric">Examples</p>
<div class="highlight-python"><pre>In [6]: %hist -n 4 6
4:a = 12
5:print a**2</pre>
</div>
</dd></dl>

<dl class="function">
<dt id="IPython.core.history.magic_rep">
<tt class="descclassname">IPython.core.history.</tt><tt class="descname">magic_rep</tt><big>(</big><em>self</em>, <em>arg</em><big>)</big><a class="headerlink" href="#IPython.core.history.magic_rep" title="Permalink to this definition">¶</a></dt>
<dd><p>Repeat a command, or get command to input line for editing. %recall and
%rep are equivalent.</p>
<ul class="simple">
<li>%recall (no arguments):</li>
</ul>
<p>Place a string version of last computation result (stored in the special &#8216;_&#8217;
variable) to the next input prompt. Allows you to create elaborate command
lines without using copy-paste:</p>
<div class="highlight-python"><pre> In[1]: l = ["hei", "vaan"]
 In[2]: "".join(l)
Out[2]: heivaan
 In[3]: %rep
 In[4]: heivaan_ &lt;== cursor blinking</pre>
</div>
<p>%recall 45</p>
<p>Place history line 45 on the next input prompt. Use %hist to find
out the number.</p>
<p>%recall 1-4</p>
<p>Combine the specified lines into one cell, and place it on the next
input prompt. See %history for the slice syntax.</p>
<p>%recall foo+bar</p>
<p>If foo+bar can be evaluated in the user namespace, the result is
placed at the next input prompt. Otherwise, the history is searched
for lines which contain that substring, and the most recent one is
placed at the next input prompt.</p>
</dd></dl>

<dl class="function">
<dt id="IPython.core.history.magic_rerun">
<tt class="descclassname">IPython.core.history.</tt><tt class="descname">magic_rerun</tt><big>(</big><em>self</em>, <em>parameter_s=''</em><big>)</big><a class="headerlink" href="#IPython.core.history.magic_rerun" title="Permalink to this definition">¶</a></dt>
<dd><p>Re-run previous input</p>
<p>By default, you can specify ranges of input history to be repeated
(as with %history). With no arguments, it will repeat the last line.</p>
<p>Options:</p>
<blockquote>
<div><p>-l &lt;n&gt; : Repeat the last n lines of input, not including the
current command.</p>
<p>-g foo : Repeat the most recent line which contains foo</p>
</div></blockquote>
</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="IPython.core.hooks.html" title="core.hooks"
             >next</a> |</li>
        <li class="right" >
          <a href="IPython.core.formatters.html" title="core.formatters"
             >previous</a> |</li>
        <li><a href="../../index.html">home</a>|&nbsp;</li>
        <li><a href="../../search.html">search</a>|&nbsp;</li>
       <li><a href="../../index.html">documentation </a> &raquo;</li>

          <li><a href="../index.html" >The IPython API</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2008, The IPython Development Team.
      Last updated on Jul 31, 2011.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1pre.
    </div>
  </body>
</html>