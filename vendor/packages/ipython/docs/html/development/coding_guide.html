

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Coding guide &mdash; IPython 0.11 documentation</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.11',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="IPython 0.11 documentation" href="../index.html" />
    <link rel="up" title="IPython developer’s guide" href="index.html" />
    <link rel="next" title="Documenting IPython" href="doc_guide.html" />
    <link rel="prev" title="git resources" href="gitwash/git_resources.html" /> 
  </head>
  <body>

<div style="background-color: white; text-align: left; padding: 10px 10px 15px 15px">
<a href="../index.html"><img src="../_static/logo.png" border="0" alt="IPython Documentation"/></a>
</div>

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="doc_guide.html" title="Documenting IPython"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="gitwash/git_resources.html" title="git resources"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">home</a>|&nbsp;</li>
        <li><a href="../search.html">search</a>|&nbsp;</li>
       <li><a href="../index.html">documentation </a> &raquo;</li>

          <li><a href="index.html" accesskey="U">IPython developer&#8217;s guide</a> &raquo;</li> 
      </ul>
    </div>

      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Coding guide</a><ul>
<li><a class="reference internal" href="#general-coding-conventions">General coding conventions</a></li>
<li><a class="reference internal" href="#naming-conventions">Naming conventions</a></li>
<li><a class="reference internal" href="#attribute-declarations-for-objects">Attribute declarations for objects</a></li>
<li><a class="reference internal" href="#new-files">New files</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="gitwash/git_resources.html"
                        title="previous chapter">git resources</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="doc_guide.html"
                        title="next chapter">Documenting IPython</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/development/coding_guide.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="coding-guide">
<h1>Coding guide<a class="headerlink" href="#coding-guide" title="Permalink to this headline">¶</a></h1>
<div class="section" id="general-coding-conventions">
<h2>General coding conventions<a class="headerlink" href="#general-coding-conventions" title="Permalink to this headline">¶</a></h2>
<p>In general, we&#8217;ll try to follow the standard Python style conventions as
described in Python&#8217;s PEP 8 <a class="reference internal" href="#pep8">[PEP8]</a>, the official Python Style Guide.</p>
<p>Other general comments:</p>
<ul class="simple">
<li>In a large file, top level classes and functions should be separated by 2
lines to make it easier to separate them visually.</li>
<li>Use 4 spaces for indentation, <strong>never</strong> use hard tabs.</li>
<li>Keep the ordering of methods the same in classes that have the same methods.
This is particularly true for classes that implement similar interfaces and
for interfaces that are similar.</li>
</ul>
</div>
<div class="section" id="naming-conventions">
<h2>Naming conventions<a class="headerlink" href="#naming-conventions" title="Permalink to this headline">¶</a></h2>
<p>In terms of naming conventions, we&#8217;ll follow the guidelines of PEP 8 <a class="reference internal" href="#pep8">[PEP8]</a>.
Some of the existing code doesn&#8217;t honor this perfectly, but for all new
IPython code (and much existing code is being refactored), we&#8217;ll use:</p>
<ul class="simple">
<li>All <tt class="docutils literal"><span class="pre">lowercase</span></tt> module names.</li>
<li><tt class="docutils literal"><span class="pre">CamelCase</span></tt> for class names.</li>
<li><tt class="docutils literal"><span class="pre">lowercase_with_underscores</span></tt> for methods, functions, variables and
attributes.</li>
</ul>
<p>This may be confusing as some of the existing codebase uses a different
convention (<tt class="docutils literal"><span class="pre">lowerCamelCase</span></tt> for methods and attributes).  Slowly, we will
move IPython over to the new convention, providing shadow names for backward
compatibility in public interfaces.</p>
<p>There are, however, some important exceptions to these rules.  In some cases,
IPython code will interface with packages (Twisted, Wx, Qt) that use other
conventions.  At some level this makes it impossible to adhere to our own
standards at all times.  In particular, when subclassing classes that use other
naming conventions, you must follow their naming conventions.  To deal with
cases like this, we propose the following policy:</p>
<ul class="simple">
<li>If you are subclassing a class that uses different conventions, use its
naming conventions throughout your subclass.  Thus, if you are creating a
Twisted Protocol class, used Twisted&#8217;s
<tt class="docutils literal"><span class="pre">namingSchemeForMethodsAndAttributes.</span></tt></li>
<li>All IPython&#8217;s official interfaces should use our conventions.  In some cases
this will mean that you need to provide shadow names (first implement
<tt class="docutils literal"><span class="pre">fooBar</span></tt> and then <tt class="docutils literal"><span class="pre">foo_bar</span> <span class="pre">=</span> <span class="pre">fooBar</span></tt>).  We want to avoid this at all
costs, but it will probably be necessary at times.  But, please use this
sparingly!</li>
</ul>
<p>Implementation-specific <em>private</em> methods will use
<tt class="docutils literal"><span class="pre">_single_underscore_prefix</span></tt>.  Names with a leading double underscore will
<em>only</em> be used in special cases, as they makes subclassing difficult (such
names are not easily seen by child classes).</p>
<p>Occasionally some run-in lowercase names are used, but mostly for very short
names or where we are implementing methods very similar to existing ones in a
base class (like <tt class="docutils literal"><span class="pre">runlines()</span></tt> where <tt class="docutils literal"><span class="pre">runsource()</span></tt> and <tt class="docutils literal"><span class="pre">runcode()</span></tt> had
established precedent).</p>
<p>The old IPython codebase has a big mix of classes and modules prefixed with an
explicit <tt class="docutils literal"><span class="pre">IP</span></tt>. In Python this is mostly unnecessary, redundant and frowned
upon, as namespaces offer cleaner prefixing. The only case where this approach
is justified is for classes which are expected to be imported into external
namespaces and a very generic name (like Shell) is too likely to clash with
something else.  However, if a prefix seems absolutely necessary the more
specific <tt class="docutils literal"><span class="pre">IPY</span></tt> or <tt class="docutils literal"><span class="pre">ipy</span></tt> are preferred.</p>
<table class="docutils citation" frame="void" id="pep8" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[PEP8]</td><td><em>(<a class="fn-backref" href="#id1">1</a>, <a class="fn-backref" href="#id2">2</a>)</em> Python Enhancement Proposal 8.  <a class="reference external" href="http://www.python.org/peps/pep-0008.html">http://www.python.org/peps/pep-0008.html</a></td></tr>
</tbody>
</table>
</div>
<div class="section" id="attribute-declarations-for-objects">
<h2>Attribute declarations for objects<a class="headerlink" href="#attribute-declarations-for-objects" title="Permalink to this headline">¶</a></h2>
<p>In general, objects should declare in their <em>class</em> all attributes the object
is meant to hold throughout its life.  While Python allows you to add an
attribute to an instance at any point in time, this makes the code harder to
read and requires methods to constantly use checks with hasattr() or try/except
calls.  By declaring all attributes of the object in the class header, there is
a single place one can refer to for understanding the object&#8217;s data interface,
where comments can explain the role of each variable and when possible,
sensible deafaults can be assigned.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">If an attribute is meant to contain a mutable object, it should be set to
<tt class="docutils literal"><span class="pre">None</span></tt> in the class and its mutable value should be set in the object&#8217;s
constructor.  Since class attributes are shared by all instances, failure
to do this can lead to difficult to track bugs.  But you should still set
it in the class declaration so the interface specification is complete and
documdented in one place.</p>
</div>
<p>A simple example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">foo</span><span class="p">:</span>
    <span class="c"># X does..., sensible default given:</span>
    <span class="n">x</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="c"># y does..., default will be set by constructor</span>
    <span class="n">y</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="c"># z starts as an empty list, must be set in constructor</span>
    <span class="n">z</span> <span class="o">=</span> <span class="bp">None</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">y</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">z</span> <span class="o">=</span> <span class="p">[]</span>
</pre></div>
</div>
</div>
<div class="section" id="new-files">
<h2>New files<a class="headerlink" href="#new-files" title="Permalink to this headline">¶</a></h2>
<p>When starting a new file for IPython, you can use the following template as a
starting point that has a few common things pre-written for you.  The template
is included in the documentation sources as
<tt class="file docutils literal"><span class="pre">docs/sources/development/template.py</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="sd">&quot;&quot;&quot;A one-line description.</span>

<span class="sd">A longer description that spans multiple lines.  Explain the purpose of the</span>
<span class="sd">file and provide a short list of the key classes/functions it contains.  This</span>
<span class="sd">is the docstring shown when some does &#39;import foo;foo?&#39; in IPython, so it</span>
<span class="sd">should be reasonably useful and informative.</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="c">#-----------------------------------------------------------------------------</span>
<span class="c"># Copyright (c) 2011, the IPython Development Team.</span>
<span class="c">#</span>
<span class="c"># Distributed under the terms of the Modified BSD License.</span>
<span class="c">#</span>
<span class="c"># The full license is in the file COPYING.txt, distributed with this software.</span>
<span class="c">#-----------------------------------------------------------------------------</span>

<span class="c">#-----------------------------------------------------------------------------</span>
<span class="c"># Imports</span>
<span class="c">#-----------------------------------------------------------------------------</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">print_function</span>

<span class="c"># [remove this comment in production]</span>
<span class="c">#</span>
<span class="c"># List all imports, sorted within each section (stdlib/third-party/ipython).</span>
<span class="c"># For &#39;import foo&#39;, use one import per line.  For &#39;from foo.bar import a, b, c&#39;</span>
<span class="c"># it&#39;s OK to import multiple items, use the parenthesized syntax &#39;from foo</span>
<span class="c"># import (a, b, ...)&#39; if the list needs multiple lines.</span>

<span class="c"># Stdlib imports</span>

<span class="c"># Third-party imports</span>

<span class="c"># Our own imports</span>


<span class="c"># [remove this comment in production]</span>
<span class="c">#</span>
<span class="c"># Use broad section headers like this one that make it easier to navigate the</span>
<span class="c"># file, with descriptive titles.  For complex classes, simliar (but indented)</span>
<span class="c"># headers are useful to organize the internal class structure.</span>

<span class="c">#-----------------------------------------------------------------------------</span>
<span class="c"># Globals and constants</span>
<span class="c">#-----------------------------------------------------------------------------</span>

<span class="c">#-----------------------------------------------------------------------------</span>
<span class="c"># Local utilities</span>
<span class="c">#-----------------------------------------------------------------------------</span>

<span class="c">#-----------------------------------------------------------------------------</span>
<span class="c"># Classes and functions</span>
<span class="c">#-----------------------------------------------------------------------------</span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="doc_guide.html" title="Documenting IPython"
             >next</a> |</li>
        <li class="right" >
          <a href="gitwash/git_resources.html" title="git resources"
             >previous</a> |</li>
        <li><a href="../index.html">home</a>|&nbsp;</li>
        <li><a href="../search.html">search</a>|&nbsp;</li>
       <li><a href="../index.html">documentation </a> &raquo;</li>

          <li><a href="index.html" >IPython developer&#8217;s guide</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2008, The IPython Development Team.
      Last updated on Jul 31, 2011.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1pre.
    </div>
  </body>
</html>