{% extends "base.html" %}

{% set crumbs = [(url('kbadge.badges_list'), _('Badges')), (None, _('Recently Awarded'))] %}

{% block content %}
  <div class="grid_12">
    {% if badge %}
      {% trans badge_name=pgettext('DB: badger.Badge.title', badge.title) %}
        <h2>Recently awarded &quot;{{ badge_name }}&quot; badges</h2>
      {% endtrans %}
    {% else %}
      <h2>{{ _('Recently awarded badges') }}</h2>
    {% endif %}
  </div>

  <ul class="cf" id="awards-list">
    {% for award in awards.object_list %}
      {% if award.image %}
        {% set award_image = award.image.url %}
      {% elif award.badge.image %}
        {% set award_image = award.badge.image.url %}
      {% else %}
        {% set award_image = webpack_static('kbadge/img/default-badge.png') %}
      {% endif %}
      <li class="grid_4">
        <a class="cf" href="{{ award.get_absolute_url() }}">
          <div class="badge">
            <img src="{{ award_image }}" alt="" title="{{ pgettext('DB: badger.Badge.title', award.badge.title) }}">
            <span>{{ pgettext('DB: badger.Badge.title', award.badge.title) }}</span>
          </div>
          <div class="award">
            {{ _('awarded to') }}
            <br><img src="{{ profile_avatar(award.user) }}" alt="" title="{{ award.user }}">
            <br>{{ award.user }}
          </div>
          <div class="meta">
            {{ datetimeformat(award.created) }}
          </div>
        </a>
      </li>
    {% endfor %}
  </ul>

  {% if awards.object_list %}
    {{ awards|quick_paginator }}
  {% endif %}
{% endblock %}
