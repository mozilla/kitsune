{% extends 'mobile/base.html' %}

{% set headline = _('Messages') %}
{% set title = headline %}

{% set styles = ('mobile/messages',) %}
{% set classes = 'outbox mailbox' %}

{% set page_align = 'left' %}

{% block after_header %}
  <ul class="mailbox-tabs">
    <li><a href="{{ url('messages.inbox') }}">{{ _('Inbox') }}</a></li>
    <li>{{ _('Sent Messages') }}</li>
  </ul>
{% endblock %}

{% block content %}
  {% if msgs %}
    <form action="{{ url('messages.outbox_bulk_action') }}" method="post">
      <ul class="messages">
        {% for message in msgs %}
          <li>
            <input type="checkbox" name="id" value="{{ message.id }}">
            <a href="{{ url('messages.read_outbox', message.id) }}">
              <img class="avatar" src="{{ profile_avatar(message.recipient) }}">
              <span class="details">
                <span class="meta">
                  <span class="name">
                    {% if message.sender %}
                      {{ display_name(message.recipient) }}
                    {% else %}
                      {{ _('System') }}
                    {% endif %}
                  </span>
                  {{ datetimeformat(message.created) }}
                </span>
                <span class="summary">{{ message.content_parsed|striptags|truncate(length=160) }}</span>
              </span>
            </a>
          </li>
        {% endfor %}
      </ul>
      {{ csrf() }}
    </form>
  {% else %}
    <p>{{ _('There are no messages here.') }}</p>
  {% endif %}
{% endblock %}
